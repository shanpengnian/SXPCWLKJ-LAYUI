<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>layuiAdmin 控制台主页一</title>
		<meta name="renderer" content="webkit">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<link rel="stylesheet" href="../../layuiadmin/layui/css/layui.css" media="all">
		<link rel="stylesheet" href="../../layuiadmin/style/admin.css" media="all">
		<link rel="stylesheet" href="../../plugin/jQueryRunning/css/jquery.running.css">
	</head>
	<body>

		<div class="layui-fluid">
			<div class="layui-row layui-col-space15">
				<div class="layui-col-xs12 layui-col-sm6 layui-col-md8">
					<div class="layui-row layui-col-space15">
						<div class="layui-col-xs12 layui-col-sm12 layui-col-md6">
							<div class="layui-card">
								<div class="layui-card-header">快捷方式</div>
								<div class="layui-card-body">

									<div class="layui-carousel layadmin-carousel layadmin-shortcut">
										<div carousel-item>
											<ul class="layui-row layui-col-space10">
												<li class="layui-col-xs3">
													<a lay-href="home/index.html">
														<i class="layui-icon layui-icon-console"></i>
														<cite>控制台</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a lay-href="log/log.html">
														<i class="layui-icon layui-icon-chart"></i>
														<cite>日志列表</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a lay-href="api/api.html">
														<i class="layui-icon layui-icon-template-1"></i>
														<cite>API管理</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a layadmin-event="im">
														<i class="layui-icon layui-icon-chat"></i>
														<cite>聊天</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a lay-href="obj/obj.html">
														<i class="layui-icon layui-icon-find-fill"></i>
														<cite>子系统</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a lay-href="task/task.html">
														<i class="layui-icon layui-icon-survey"></i>
														<cite>自动任务</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a lay-href="user/user.html">
														<i class="layui-icon layui-icon-user"></i>
														<cite>用户</cite>
													</a>
												</li>
												<li class="layui-col-xs3">
													<a lay-href="user/role.html">
														<i class="layui-icon layui-icon-set"></i>
														<cite>设置</cite>
													</a>
												</li>
											</ul>
											<ul class="layui-row layui-col-space10">
												<li class="layui-col-xs3">
													<a lay-href="user/user_info.html">
														<i class="layui-icon layui-icon-set"></i>
														<cite>我的资料</cite>
													</a>
												</li>
												
												<li class="layui-col-xs3">
													<a lay-href="user/user_passWprd.html">
														<i class="layui-icon layui-icon-set"></i>
														<cite>修改密码</cite>
													</a>
												</li>
											</ul>

										</div>
									</div>

								</div>
							</div>
						</div>
						<div class="layui-col-xs12 layui-col-sm12 layui-col-md6">
							<div class="layui-card">
								<div class="layui-card-header">状态</div>
								<div class="layui-card-body">

									<div class="layui-carousel layadmin-carousel layadmin-backlog">
										<div class="layui-row">
											<div class="layui-col-xs4 layui-col-sm4 layui-col-md4 layui-row" style="text-align: center">
												<div style="width: 100%;height: 40px;text-align: center;line-height: 40px">
													<span>JVM负载</span>
												</div>
												<div style="width: 100%;height: 110px;text-align: center">
													<canvas id="my_jvm" width="100" height="100"></canvas>
												</div>
												<div style="width: 100%;height: 40px;text-align: center;line-height: 40px">
													<span id="fyzaitxt">运行流畅</span>
												</div>
											</div>
											<div class="layui-col-xs4 layui-col-sm4 layui-col-md4 layui-row" style="text-align: center">
												<div style="width: 100%;height: 40px;text-align: center;line-height: 40px">
													<span>CPU使用率</span>
												</div>
												<div style="width: 100%;height: 110px;text-align: center">
													<canvas id="cpu_html" width="100" height="100"></canvas>
												</div>
												<div style="width: 100%;height: 40px;text-align: center;line-height: 40px">
													<span class="sysCpu"></span>
												</div>
											</div>
											<div class="layui-col-xs4 layui-col-sm4 layui-col-md4 layui-row" style="text-align: center">
												<div style="width: 100%;height: 40px;text-align: center;line-height: 40px">
													<span>内存使用率</span>
												</div>
												<div style="width: 100%;height: 110px;text-align: center">
													<canvas id="my_neicun" width="100" height="100"></canvas>
												</div>
												<div style="width: 100%;height: 40px;text-align: center;line-height: 40px">
													<span id="sysShenyuNeicun"></span>/<span id="sysNeicun"></span>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
						<div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
							<div class="layui-card">
								<div class="layui-card-header">数据概览</div>
								<div class="layui-card-body">

									<div class="layui-carousel layadmin-carousel layadmin-dataview" data-anim="fade" lay-filter="LAY-index-dataview">
										<div carousel-item id="LAY-index-dataview">
											<div><i class="layui-icon layui-icon-loading1 layadmin-loading"></i></div>
											<div></div>
											<div></div>
										</div>
									</div>

								</div>
							</div>
						</div>

					</div>
				</div>

				<div class="layui-col-xs12 layui-col-sm6 layui-col-md4">
					<div class="layui-row layui-col-space15">

						<div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
							<div class="layui-card" style="min-height: 250px">
								<div class="layui-card-header">
									西决心语
									<i class="layui-icon layui-icon-tips" lay-tips="要支持的噢" lay-offset="5"></i>
								</div>
								<div class="layui-card-body layui-text layadmin-text">
									<p>
										此系统框架用的都是当下主流的框架,目前继承的功能可以快速的开发绝大数的定制功能开发,支持高速缓存Redis,后台的持久层用的是
										MybatisPlus框架几乎做到的NotSql的操作,开发效率极高,还集成了MQTT通信方便功能的扩展。
									</p>
									<p>我是一个热爱开发的程序员,平时写了一些随笔博客,希望对热爱开发的朋友有所帮助,欢迎联系我定制App,小程序,PC网站,运营系统 QQ:942879858。</p>
									<p>—— 西决（<a href="https://www.sxpcwlkj.com/" target="_blank">品创网络</a>）</p>
								</div>
							</div>
						</div>
						<div class="layui-col-xs12 layui-col-sm12 layui-col-md12">
							<div class="layui-card">
								<div class="layui-card-header">版本信息</div>
								<div class="layui-card-body layui-text" style="margin: 8px 0px;">
									<table class="layui-table">
										<colgroup>
											<col width="150">
											<col>
										</colgroup>
										<tbody>
											<tr>
												<td>管理系统名称</td>
												<td id="sysName">

												</td>
											</tr>

											<tr>
												<td>管理系统版本</td>
												<td id="sysVersion">

												</td>
											</tr>
											<tr>
												<td>服务器系统类型</td>
												<td id="sysXiTong">

												</td>
											</tr>
											<tr>
												<td>服务器系统版本</td>
												<td id="getSysXiTongVersion">

												</td>
											</tr>
											<tr>
												<td>服务器CPU数</td>
												<td class="sysCpu">

												</td>
											</tr>
											<tr>
												<td>服务器服务IP</td>
												<td id="sysIp">

												</td>
											</tr>

											<tr>
												<td>JVM版本</td>
												<td id="sysJvmVersion">

												</td>
											</tr>
											<tr>
												<td>时区</td>
												<td id="sysShiqu">

												</td>
											</tr>

										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
		<div class="layer_notice" style="width: 150px;height: 180px;padding: 10px;background-color: white;text-align: center;display: none">
			<img id="payImg" src="https://jifugou.oss-cn-zhangjiakou.aliyuncs.com/00-app/logo.png" style="width: 150px;height: 150px;">
			<p style="margin-top: 10px">微信扫码支付</p>
		</div>
		<script src="../../layuiadmin/layui/layui.js?t=1"></script>
		<script type="text/javascript" src="../../plugin/jQueryRunning/js/jquery.min.js"></script>
		<script type="text/javascript" src="../../plugin/cavasProgress/js/progress.js"></script>
		<script>
			layui.config({
				base: '../../layuiadmin/' //静态资源所在路径
			}).extend({
				index: 'lib/index' //主入口模块
			}).use(['index', 'console', 'form', 'common'], function() {
				var $ = layui.$,
					layer = layui.layer,
					laytpl = layui.laytpl,
					setter = layui.setter,
					view = layui.view,
					common = layui.common,
					admin = layui.admin,
					form = layui.form;
				var p1 = new Progress({
					el: 'cpu_html', //canvas元素id
					deg: 0.0001, //绘制角度
					timer: 1, //绘制时间
					lineWidth: 5, //线宽
					lineBgColor: '#e2e2e2', //底圆颜色
					lineColor: '#00aaff', //动态圆颜色
					textColor: '#000', //文本颜色
					fontSize: 20, //字体大小
					circleRadius: 100 //圆半径
				});
				var p2 = new Progress({
					el: 'my_neicun', //canvas元素id
					deg: 0.0001, //绘制角度
					timer: 1, //绘制时间
					lineWidth: 6, //线宽
					lineBgColor: '#e2e2e2', //底圆颜色
					lineColor: '#e4393c', //动态圆颜色
					textColor: '#000', //文本颜色
					fontSize: 20, //字体大小
					circleRadius: 100 //圆半径
				});
				var p3 = new Progress({
					el: 'my_jvm', //canvas元素id
					deg: 0.0001, //绘制角度
					timer: 5, //绘制时间
					lineWidth: 6, //线宽
					lineBgColor: '#e2e2e2', //底圆颜色
					lineColor: '#50b1ff', //动态圆颜色
					textColor: '#000', //文本颜色
					fontSize: 20, //字体大小
					circleRadius: 100 //圆半径
				});
				//系统信息
				selectSysinfo()
				function selectSysinfo(){
					common.get("home/selectSysinfo", {}, function(res) {
					
						console.log(res.data)
						$("#sysName").text(res.data.sysName)
						$("#sysVersion").text(res.data.sysVersion)
						$("#sysIp").text(res.data.sysIp)
						$("#sysJvmVersion").text(res.data.sysJvmVersion)
						$("#sysShiqu").text(res.data.sysShiqu)
						$(".sysCpu").text(res.data.sysCpu)
						$("#sysXiTong").text(res.data.sysXiTong)
						$("#getSysXiTongVersion").text(res.data.getSysXiTongVersion)
						let fuzai=res.data.sysCupFuzai
						if(fuzai<1){
							fuzai=1;
						}
						if (res.data.sysCupFuzai < 25) {
							 p1 = new Progress({
								el: 'cpu_html', //canvas元素id
								deg: fuzai, //绘制角度
								timer: 3, //绘制时间
								lineWidth: 5, //线宽
								lineBgColor: '#e2e2e2', //底圆颜色
								lineColor: '#00FF01', //动态圆颜色
								textColor: '#000', //文本颜色
								fontSize: 20, //字体大小
								circleRadius: 100 //圆半径
							});
							
						} else if (fuzai >= 25&&fuzai < 90) {
							 p1 = new Progress({
								el: 'cpu_html', //canvas元素id
								deg: fuzai, //绘制角度
								timer: 3, //绘制时间
								lineWidth: 5, //线宽
								lineBgColor: '#e2e2e2', //底圆颜色
								lineColor: '#00aa00', //动态圆颜色
								textColor: '#000', //文本颜色
								fontSize: 20, //字体大小
								circleRadius: 100 //圆半径
							});
							$("#fyzaitxt").text("运行正常")
							
						} else if (fuzai >=90&&fuzai <= 100) {
							 p1 = new Progress({
								el: 'cpu_html', //canvas元素id
								deg: fuzai, //绘制角度
								timer: 3, //绘制时间
								lineWidth: 5, //线宽
								lineBgColor: '#e2e2e2', //底圆颜色
								lineColor: '#FF5500', //动态圆颜色
								textColor: '#000', //文本颜色
								fontSize: 20, //字体大小
								circleRadius: 100 //圆半径
							});
							$("#fyzaitxt").text("运行堵塞")
							
						}
						var sysShenyuNeicun=res.data.sysShenyuNeicun;
						var sysNeicun=res.data.sysNeicun;
						$("#sysShenyuNeicun").text(sysShenyuNeicun+"M")
						$("#sysNeicun").text(sysNeicun+"M")
						//内存
						p2 = new Progress({
							el: 'my_neicun', //canvas元素id
							deg: res.data.sysNeicunlv*100, //绘制角度
							timer: 2, //绘制时间
							lineWidth: 6, //线宽
							lineBgColor: '#e2e2e2', //底圆颜色
							lineColor: '#e4393c', //动态圆颜色
							textColor: '#000', //文本颜色
							fontSize: 20, //字体大小
							circleRadius: 100 //圆半径
						});
						
						if(res.data.sysJvmlv>90){
							p3 = new Progress({
								el: 'my_jvm', //canvas元素id
								deg: res.data.sysJvmlv, //绘制角度
								timer: 5, //绘制时间
								lineWidth: 6, //线宽
								lineBgColor: '#ff0000', //底圆颜色
								lineColor: '#50b1ff', //动态圆颜色
								textColor: '#000', //文本颜色
								fontSize: 20, //字体大小
								circleRadius: 100 //圆半径
							});
						}else{
							p3 = new Progress({
								el: 'my_jvm', //canvas元素id
								deg: res.data.sysJvmlv<1?1:res.data.sysJvmlv, //绘制角度
								timer: 5, //绘制时间
								lineWidth: 6, //线宽
								lineBgColor: '#e2e2e2', //底圆颜色
								lineColor: '#50b1ff', //动态圆颜色
								textColor: '#000', //文本颜色
								fontSize: 20, //字体大小
								circleRadius: 100 //圆半径
							});
						}
						
					 })
				}
				setInterval(function(){
					//selectSysinfo()
				},10000);
				

			});
		</script>
		
	</body>
</html>
